# ユーザーガイド (User Guide)

VoxDraft の詳細な機能と使い方についてのマニュアルです。

## 目次

1. [画面構成](#画面構成)
2. [基本的な使い方](#基本的な使い方)
3. [設定・データ管理](#設定データ管理)
4. [モバイル・タブレット対応](#モバイルタブレット対応)
5. [トラブルシューティング](#トラブルシューティング)

---

## 画面構成

画面は大きく3つのパネルに分かれています。

| パネル | 説明 |
|-------|------|
| **左サイドバー** | セッション履歴一覧。色付け、タイトル編集、削除が可能 |
| **中央パネル** | 文字起こしブロック一覧。チェック、編集、色付けが可能 |
| **右パネル (エディタ)** | Markdownエディタ。リビジョン履歴機能付き |

画面下部には **フッターコントロール** があり、録音ボタン、テンプレート選択、AI実行ボタンが配置されています。

---

## 基本的な使い方

### 録音と文字起こし

1. フッター中央の **マイクボタン** をクリックして録音を開始
2. もう一度クリックで停止 → 自動的に文字起こし処理開始
3. 処理完了後、中央パネルにブロックとして追加

> [!TIP]
> 設定の「ブロック挿入位置」で、新しいブロックを上に追加するか下に追加するか選択できます。

**ファイルアップロード**: 中央パネル上部のアップロードアイコン、またはフッターの「ファイル選択」から音声ファイル (`.mp3`, `.m4a`, `.wav` 等) をアップロードできます。

### AIによるドラフト作成

1. 中央パネルで、AIの入力に使いたいブロックの **チェックボックス** をオンに
2. フッターの **テンプレート選択** から用途に合ったテンプレートを選択
3. 必要に応じてプロンプト入力欄を編集
4. **「実行」ボタン** をクリック
5. 右側エディタにAI生成テキストがストリーミング表示

### エディタでの編集

- **編集モード**: Markdown記法 (`# 見出し`, `- リスト`, `**太字**`) が使用可能
- **プレビューモード**: エディタ上部の「プレビュー」ボタンでレンダリング表示
- **リビジョン履歴**: 自動保存されたバージョン間の移動・復元が可能

### セッション管理

- **セッション色付け**: サイドバーのセッション名横のパレットアイコンで色を設定
- **ブロック色付け**: 各ブロックのパレットアイコンで色を設定
- **前回セッション復元**: ブラウザリロード時に前回開いていたセッションが自動復元

---

## 設定・データ管理

サイドバー下部の **歯車アイコン** から設定画面を開きます。

### 一般設定

| 設定項目 | 説明 |
|---------|------|
| 言語 | 日本語 / English |
| 保存エンコード | UTF-8 / Shift_JIS |
| 改行コード | LF / CRLF |
| ブロック挿入位置 | 上部（新しいものが上）/ 下部（新しいものが下） |
| プロンプト構成 | AI呼び出し時のプロンプト構造をカスタマイズ |

### API設定

使用するAIプロバイダーを設定できます。

**対応プロバイダー:**

| サービス | STT (音声認識) | LLM (文章生成) |
|---------|---------------|----------------|
| OpenAI | ✅ Whisper | ✅ GPT-4o等 |
| Azure OpenAI | ✅ | ✅ |
| Gemini | ✅ | ✅ |

Geminiを使用する場合は、設定画面でAPIキーとモデルを選択してください。
OpenAI/Azureは `backend/config.yaml` と `backend/.env` で設定します。

### プロンプトテンプレート

よく使うAIへの指示をテンプレートとして保存・編集できます。

**デフォルトテンプレート:**
- 要約
- 箇条書き
- 議事録作成
- Todo/アクション抽出
- 構造化レポート

### 単語辞書

専門用語などの読み・表記を登録できます（将来的な拡張機能予定）。

### データ管理

| 機能 | 説明 |
|-----|------|
| **エクスポート** | 全データ（セッション、音声、設定）を `.tar.gz` でダウンロード |
| **インポート** | バックアップファイルからデータを復元 |
| **アーカイブ削除** | 古いバックアップファイルを削除 |

> [!WARNING]
> インポート時は既存データが上書きされる場合があります。事前にバックアップを取ってください。

---

## モバイル・タブレット対応

### スマートフォン

- 画面左上の **ハンバーガーメニュー** をタップでセッション一覧を表示
- セッション選択後、自動的にメニューが閉じます
- 背景タップでもメニューを閉じられます

### iPad / タブレット

- iPad Pro 13インチ、iPad mini A17 の横置きに最適化
- 3ペインレイアウトがそのまま表示されます
- パネル幅はデバイスごとに独立して保存

---

## トラブルシューティング

### 録音が開始されない
- ブラウザにマイクの許可を与えてください
- HTTPSまたはlocalhostでアクセスしていることを確認

### 文字起こしが失敗する
- 設定画面でSTTプロバイダーとAPIキーが正しく設定されているか確認
- ネットワーク接続を確認

### AIが生成されない
- 設定画面でLLMプロバイダーとモデルが正しく設定されているか確認
- ブロックがチェック（選択）されているか確認

### モバイルからデータが見えない
- `http://localhost` ではなく `http://<PCのIPアドレス>:5173` でアクセス
- PCとモバイルが同じネットワークに接続されているか確認
